<div class="row">
	
	<div class="pane bg-dark-2">
		<div class="container">
			<h2 class="type-neutral-11 title">Pivotal Cloud Foundry Developer: Continuous Delivery</h2>
		</div>
	</div>
</div>

<!DOCTYPE html>


<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="alternate" href="/index.xml" type="application/rss+xml" title="Pivotal Cloud Foundry Developer">
		<link rel="icon" href="/pivotal-cloud-foundry-developer/P_Mark_WhiteOnTeal.png">
		<title>Continuous Delivery - Pivotal Cloud Foundry Developer</title>
		<link rel="stylesheet" href="/pivotal-cloud-foundry-developer/css/highlight.js.min.css">
		<link rel="stylesheet" href="/pivotal-cloud-foundry-developer/css/pui-v2.0.0/pivotal-ui.css">
		<link rel="stylesheet" href="/pivotal-cloud-foundry-developer/css/theme.css">
		<link rel="stylesheet" href="/pivotal-cloud-foundry-developer/css/bootie-docs.css">
	</head>

<body role="document">
	

<div class="container">
	<div class="row">
			

	<div class="col-sm-14 doc-sidebar">
		<div class="sidebar-module">
			<div class="sidebar-toc">
				<h4>Table of Contents</h4>
				<nav id="TableOfContents">
<ul>
<li><a href="#requirements:d680e8a854a7cbad6d490c445cba2eba">Requirements</a></li>
<li><a href="#what-you-will-learn:d680e8a854a7cbad6d490c445cba2eba">What you will learn</a></li>
<li><a href="#exercises:d680e8a854a7cbad6d490c445cba2eba">Exercises</a>
<ul>
<li><a href="#what-is-continuous-delivery:d680e8a854a7cbad6d490c445cba2eba">What is Continuous Delivery?</a></li>
<li><a href="#setup-github-repository:d680e8a854a7cbad6d490c445cba2eba">Setup Github Repository</a></li>
<li><a href="#install-jenkins:d680e8a854a7cbad6d490c445cba2eba">Install Jenkins</a>
<ul>
<li><a href="#local-installation:d680e8a854a7cbad6d490c445cba2eba">Local Installation</a></li>
<li><a href="#aws-jenkins-ami:d680e8a854a7cbad6d490c445cba2eba">AWS Jenkins AMI</a></li>
</ul></li>
<li><a href="#configure-jenkins:d680e8a854a7cbad6d490c445cba2eba">Configure Jenkins</a></li>
<li><a href="#create-build-job:d680e8a854a7cbad6d490c445cba2eba">Create Build Job</a></li>
<li><a href="#questions:d680e8a854a7cbad6d490c445cba2eba">Questions</a></li>
<li><a href="#cleanup:d680e8a854a7cbad6d490c445cba2eba">Cleanup</a></li>
</ul></li>
<li><a href="#beyond-the-class:d680e8a854a7cbad6d490c445cba2eba">Beyond the Class</a>
<ul>
<li><a href="#artifact-repository:d680e8a854a7cbad6d490c445cba2eba">Artifact Repository</a></li>
<li><a href="#code-promotion:d680e8a854a7cbad6d490c445cba2eba">Code promotion</a></li>
<li><a href="#notification:d680e8a854a7cbad6d490c445cba2eba">Notification</a></li>
<li><a href="#pivotal-cloud-foundry:d680e8a854a7cbad6d490c445cba2eba">Pivotal Cloud Foundry</a></li>
</ul></li>
</ul>
</nav>
			</div>
		</div>
	</div>


		<div class="col-sm-24 doc-main">
			<main role="main">
				<article>
					<a id="title"></a>
					<div class="doc-entry-meta">
					</div>
					<section>
						

<p>Estimated Time: 25 minutes</p>

<h1 id="requirements:d680e8a854a7cbad6d490c445cba2eba">Requirements</h1>

<p><a href="/pivotal-cloud-foundry-developer/requirements">Lab Requirements</a></p>

<h1 id="what-you-will-learn:d680e8a854a7cbad6d490c445cba2eba">What you will learn</h1>

<ul>
<li>How to build a continuous delivery pipeline with Jenkins</li>
</ul>

<h1 id="exercises:d680e8a854a7cbad6d490c445cba2eba">Exercises</h1>

<h2 id="what-is-continuous-delivery:d680e8a854a7cbad6d490c445cba2eba">What is Continuous Delivery?</h2>

<p>For a brief explanation, click <a href=https://en.wikipedia.org/wiki/Continuous_delivery target="_blank">here</a>.</p>

<h2 id="setup-github-repository:d680e8a854a7cbad6d490c445cba2eba">Setup Github Repository</h2>

<p>1) Locate the <code>Articulate</code> project on GitHub:
<a href=https://github.com/pivotal-enablement/articulate target="_blank">github.com/pivotal-enablement/articulate</a></p>

<p>2) Use the <code>Fork</code> button to make your own private copy of the project in your own GitHub account.</p>

<h2 id="install-jenkins:d680e8a854a7cbad6d490c445cba2eba">Install Jenkins</h2>

<p>Install Jenkins on your local machine or use AWS Jenkins AMI.</p>

<h3 id="local-installation:d680e8a854a7cbad6d490c445cba2eba">Local Installation</h3>

<p>1) Prior to installing Jenkins the following should be installed:</p>

<ul>
<li><a href=http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html target="_blank">JDK 1.8</a></li>
<li><a href=https://git-scm.com/ target="_blank">git</a></li>
</ul>

<p>2) Open a browser to <a href=https://jenkins.io/ target="_blank">jenkins.io</a> and download the installer for your OS.</p>

<p><img src="/pivotal-cloud-foundry-developer/resources/images/download.png" alt="Download" title="Download" /></p>

<p>3) Run the installer.</p>

<p>4) On completion of the install, you should see the Jenkins dashboard appear in your browser at
<code>localhost:8080</code>.</p>

<h3 id="aws-jenkins-ami:d680e8a854a7cbad6d490c445cba2eba">AWS Jenkins AMI</h3>

<p>Provision a <a href="/pivotal-cloud-foundry-developer/continuous-delivery/aws-jenkins-ami">Jenkins instance on AWS</a>.</p>

<h2 id="configure-jenkins:d680e8a854a7cbad6d490c445cba2eba">Configure Jenkins</h2>

<p><em>You may skip this section if using the AWS Jenkins AMI</em>.</p>

<p>1) Click on the <code>Manage Jenkins</code> link, then click the <code>Manage Plugins</code> link.</p>

<p><img src="/pivotal-cloud-foundry-developer/resources/images/manage_plugins.png" alt="Manage Plugins" title="Manage Plugins" /></p>

<p>2) Click on the <code>Available</code> tab, and find the GitHub plugin. (You can search using the Filter box in the top
right corner.) Select it and click <code>Install without restart</code>.</p>

<p><img src="/pivotal-cloud-foundry-developer/resources/images/github_plugin.png" alt="GitHub plugin" title="GitHub plugin" /></p>

<p>3) Also install the Cloud Foundry Plugin.  Select it and click <code>Install without restart</code>.</p>

<p><img src="/pivotal-cloud-foundry-developer/resources/images/cf_plugin.png" alt="cf plugin" title="cf plugin" /></p>

<p>4) From the <code>Manage Jenkins</code> page, click on <code>Configure System</code>. Scroll down to the <code>Maven</code> section, and
click the <code>Add Maven</code> button.</p>

<p><img src="/pivotal-cloud-foundry-developer/resources/images/maven.png" alt="Maven Configuration" title="Maven Configuration" /></p>

<h2 id="create-build-job:d680e8a854a7cbad6d490c445cba2eba">Create Build Job</h2>

<p>1) From the Jenkins dashboard, click <code>New Item</code> (in top left corner), name it <code>articulate-&lt;insert initials&gt;</code> and select <code>Maven
project</code> Then click <code>OK</code>.</p>

<p>Example Name: <code>articulate-dnr</code>.  Do not use <code>articulate</code>.  Make sure that it unique and personably identifiable.</p>

<p>2) Under <code>Source Code Management</code>, select <code>Git</code>, and supply your forked repository URL.</p>

<p><img src="/pivotal-cloud-foundry-developer/resources/images/repo.png" alt="Repo" title="Repo" /></p>

<p>3) Under <code>Build Triggers</code>, select <code>Poll SCM</code>. In the <code>Schedule</code>, enter the CRON formatted string such as <code>H/5 * * * *</code>. This will poll your Github repository every 5 minutes for changes, and if any are detected, will execute the build.</p>

<p><img src="/pivotal-cloud-foundry-developer/resources/images/poll.png" alt="Poll" title="Poll" /></p>

<p>4) Under <code>Build</code>, add the project path to the <code>Root POM</code>, so it becomes <code>pom.xml</code>.</p>

<p><img src="/pivotal-cloud-foundry-developer/resources/images/build.png" alt="Build" title="Build" /></p>

<p>5) Under <code>Post-build Actions</code>, click the <code>Add post-build action</code>, and select <code>Push to Cloud Foundry</code>.</p>

<p>6) Fill in the parameters to target and log into the Cloud Foundry instance you&rsquo;ll be using. You will have to add
your credentials. Test the connection to make sure you can connect.  Also check the <code>Reset app if already exists</code> checkbox.  This allows for app bits and configuration to be updated/reset with each deployment; creating a more dependable way to redeploy the application (see the context sensitive help in Jenkins for more details).</p>

<p>7) Make sure that <code>Enter configuration in Jenkins</code> is selected.</p>

<p>Fill in the following fields:</p>

<ul>
<li><code>Application Name</code> = <code>articulate-&lt;insert initials&gt;</code> (e.g. <code>articulate-dnr</code>)</li>
<li><code>Memory</code> = <code>512M</code></li>
<li><code>Hostname</code> = come up with something original and unique</li>
<li><code>Instance</code> = <code>1</code></li>
<li><code>Timeout</code> = <code>60</code></li>
<li><code>Services</code> = <code>attendee-service</code></li>
</ul>

<p><code>Advanced Settings</code>:</p>

<ul>
<li><code>Application Path</code> = <code>target/articulate-0.0.1-SNAPSHOT.jar</code></li>
</ul>

<p><img src="/pivotal-cloud-foundry-developer/resources/images/config.png" alt="Push config" title="Push config" /></p>

<p>8) Save the config and try running the build by clicking <code>Build Now</code>.  Do not proceed past this step until you have a successful build and deployment to Pivotal Cloud Foundry.  Confirm the application is deployed by viewing it in your browser.</p>

<p>Make sure to view the Build details (Left Side of Screen → <code>Build History</code> → <code>Build #</code>).</p>

<p><code>Console Output</code> can be viewed there (for active or completed jobs).  This is very useful for debugging failing builds.</p>

<p><img src="/pivotal-cloud-foundry-developer/resources/images/console.png" alt="Console" title="Console" /></p>

<p>9) In your forked repo, edit the Welcome message for Articulate.</p>

<ol>
<li>Edit the following file (can be done with a browser):
<code>https://github.com/&lt;YOUR ACCOUNT&gt;/articulate/blob/master/src/main/resources/templates/index.html</code></li>
<li>Change the welcome message from <code>Welcome to Articulate!</code> to <code>Welcome to My Articulate Application!</code>
Commit and push the change to GitHub, wait until the polling detects it, and watch the magic. Verify the build in Jenkins now succeeds.  Also verify your change in the deployed application with a browser.</li>
</ol>

<p>10) <strong>Congratulations</strong>, you have finished this exercise!</p>

<h2 id="questions:d680e8a854a7cbad6d490c445cba2eba">Questions</h2>

<ul>
<li>What are some of the benefits of continuous delivery?</li>
<li>Does continuous delivery mean continuous deployment?</li>
</ul>

<h2 id="cleanup:d680e8a854a7cbad6d490c445cba2eba">Cleanup</h2>

<p>1) Delete the application that the pipeline deployed.</p>

<p>For example:</p>

<pre><code>$ cf delete articulate-dnr
</code></pre>

<h1 id="beyond-the-class:d680e8a854a7cbad6d490c445cba2eba">Beyond the Class</h1>

<p>The CD exercise above is very simplistic and should be expanded for real projects.</p>

<h2 id="artifact-repository:d680e8a854a7cbad6d490c445cba2eba">Artifact Repository</h2>

<ul>
<li>Ideally, you want to build your artifacts (jars/wars) and publish them to a repository like Artifactory.</li>
<li>Artifacts should be versioned to match the app deployments on PCF.</li>
<li>All pushes to PCF should be using the same artifacts. Artifacts should be built once and used throughout the lifecycle.</li>
</ul>

<h2 id="code-promotion:d680e8a854a7cbad6d490c445cba2eba">Code promotion</h2>

<ul>
<li>Jobs should be established in Jenkins to deploy/promote code to different phases like dev to test to prod.</li>
<li>Jobs should use the same artifact published to Artifactory.</li>
<li>Jobs can be triggered automatically or manually but should be fully automated. There should be no manual steps beyond clicking <code>build now</code>.</li>
</ul>

<h2 id="notification:d680e8a854a7cbad6d490c445cba2eba">Notification</h2>

<ul>
<li>Jenkins supports many notification plugins. It is important for code owners to be aware of build status.</li>
</ul>

<h2 id="pivotal-cloud-foundry:d680e8a854a7cbad6d490c445cba2eba">Pivotal Cloud Foundry</h2>

<p>Try out the <a href=http://docs.pivotal.io/cjoc/Jenkins.html target="_blank">CloudBees Jenkins Operations Center tile</a>.</p>

					</section>
				</article>
			</main>
		</div> 


	</div> 
</div>

<hr />
<div class="container">
	<div class="row">
		<div class="col-sm-8">
			<p class="doc-footer-em"><a href="#">Back to TOP</a></p>
		</div>
	</div>

</div> 

<footer class="doc-footer">
	
	<p>© Copyright Pivotal. All rights reserved.</p>
</footer>





<script src="/pivotal-cloud-foundry-developer/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/pivotal-cloud-foundry-developer/js/ie10-viewport-bug-workaround.js"></script>

</body>
</html>

